// ===== å¤šè¯­è¨€æ”¯æŒ =====
const translations = {
    zh: {
        // é¡µé¢æ ‡é¢˜
        pageTitle: 'è¯šä¿¡ä¿é™©ä»£ç†å…¬å¸ | Integrity Risk Solutions LLC',
        
        // å¯¼èˆªæ 
        nav: {
            home: 'é¦–é¡µ',
            about: 'å…³äºæˆ‘ä»¬',
            services: 'æœåŠ¡ä»‹ç»',
            contact: 'è”ç³»æ–¹å¼'
        },
        
        // Heroéƒ¨åˆ†
        hero: {
            title: 'ä¸“ä¸šçš„ä¿é™©ä»£ç†æœåŠ¡',
            subtitle: 'ä¸ºæ‚¨å’Œæ‚¨çš„å®¶äºº,ä»¥åŠæ‚¨çš„ä¼ä¸šæä¾›å…¨æ–¹ä½çš„ä¿é™©ä¿éšœæ–¹æ¡ˆ',
            btnServices: 'äº†è§£æœåŠ¡',
            btnContact: 'è”ç³»æˆ‘ä»¬'
        },
        
        // å…³äºæˆ‘ä»¬
        about: {
            title: 'å…³äºæˆ‘ä»¬',
            subtitle: 'å€¼å¾—ä¿¡èµ–çš„ä¿é™©åˆä½œä¼™ä¼´',
            heading: 'å…³äºæˆ‘ä»¬',
            intro: 'æˆ‘ä»¬æ˜¯ä¸€å®¶ä¸“ä¸šçš„ä¿é™©ä»£ç†æœºæ„ï¼Œè‡´åŠ›äºä¸ºå®¢æˆ·æä¾›æœ€ä¸“ä¸šã€æœ€å¯é çš„ä¿é™©ä»£ç†æœåŠ¡ã€‚å‡­å€Ÿå¤šå¹´çš„è¡Œä¸šç»éªŒå’Œä¸“ä¸šçš„å›¢é˜Ÿï¼Œæˆ‘ä»¬ä¸“æ³¨äºå•†ä¸šä¿é™©ã€æ±½è½¦ä¿é™©å’Œæˆ¿å±‹ä¿é™©é¢†åŸŸï¼Œå¸®åŠ©å®¢æˆ·æ‰¾åˆ°æœ€é€‚åˆçš„ä¿é™©è§£å†³æ–¹æ¡ˆã€‚',
            servicesTitle: 'æˆ‘ä»¬çš„æœåŠ¡èŒƒå›´',
            businessInsurance: 'å•†ä¸šä¿é™©',
            businessInsuranceDesc: 'ä¸ºå„ç±»ä¼ä¸šæä¾›å…¨é¢çš„å•†ä¸šä¿é™©è§£å†³æ–¹æ¡ˆï¼Œæ¶µç›–é¤é¥®ã€é›¶å”®ã€æœåŠ¡ã€ç‰©æµã€å»ºç­‘ç­‰å¤šä¸ªè¡Œä¸šã€‚æˆ‘ä»¬æ·±å…¥äº†è§£ä¸åŒè¡Œä¸šçš„é£é™©ç‰¹ç‚¹ï¼Œä¸ºä¼ä¸šé‡èº«å®šåˆ¶æœ€åˆé€‚çš„ä¿éšœæ–¹æ¡ˆã€‚',
            carInsurance: 'æ±½è½¦ä¿é™©',
            carInsuranceDesc: 'ä¸ºæ±½è½¦ã€æ‘©æ‰˜è½¦ã€æ¸¸è‰‡ç­‰å„ç±»äº¤é€šå·¥å…·æä¾›å…¨æ–¹ä½ä¿éšœã€‚é€šè¿‡å¿«é€ŸæŠ¥ä»·ã€å¤šå®¶ä¿é™©å…¬å¸å¯¹æ¯”å’Œä¸“ä¸šçš„ç†èµ”ååŠ©ï¼Œç¡®ä¿æ‚¨ä»¥æœ€ä¼˜æƒ çš„ä»·æ ¼è·å¾—æœ€å…¨é¢çš„ä¿éšœã€‚',
            homeInsurance: 'æˆ¿å±‹ä¿é™©',
            homeInsuranceDesc: 'ä¸ºè‡ªä½æˆ¿å’Œå‡ºç§Ÿæˆ¿æä¾›ä¸“ä¸šçš„è´¢äº§ä¿éšœæ–¹æ¡ˆï¼ŒåŒ…æ‹¬è´¢äº§è¯„ä¼°ã€ä¿éšœæ–¹æ¡ˆè®¾è®¡ã€å¿«é€Ÿç†èµ”å’Œ24å°æ—¶ä¸“ä¸šå’¨è¯¢ã€‚',
            ownerOccupied: 'è‡ªä½æˆ¿',
            rental: 'å‡ºç§Ÿæˆ¿',
            whyTitle: 'ä¸ºä»€ä¹ˆé€‰æ‹©æˆ‘ä»¬',
            whyDesc: 'æˆ‘ä»¬ä»¥ä¸“ä¸šã€è¯šä¿¡ã€é«˜æ•ˆä¸ºæœåŠ¡ç†å¿µï¼Œé€šè¿‡æ·±å…¥äº†è§£å®¢æˆ·éœ€æ±‚ï¼Œæä¾›ä¸ªæ€§åŒ–çš„ä¿é™©æ–¹æ¡ˆã€‚æ— è®ºæ‚¨æ˜¯ä¸ªäººå®¢æˆ·è¿˜æ˜¯ä¼ä¸šå®¢æˆ·ï¼Œæˆ‘ä»¬éƒ½èƒ½ä¸ºæ‚¨æä¾›ä¸“ä¸šã€è´´å¿ƒçš„æœåŠ¡ï¼Œæˆä¸ºæ‚¨æœ€å€¼å¾—ä¿¡èµ–çš„ä¿é™©åˆä½œä¼™ä¼´ã€‚',
            yearsExp: 'å¹´è¡Œä¸šç»éªŒ',
            clients: 'æ»¡æ„å®¢æˆ·',
            partners: 'åˆä½œä¿é™©å…¬å¸'
        },
        
        // æœåŠ¡ä»‹ç»
        services: {
            title: 'æœåŠ¡ä»‹ç»',
            subtitle: 'å…¨æ–¹ä½çš„ä¿é™©è§£å†³æ–¹æ¡ˆ',
            businessInsurance: 'å•†ä¸šä¿é™©',
            businessInsuranceDesc: 'ä¸ºä¼ä¸šæä¾›å…¨é¢çš„ä¿é™©è§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬å•†ä¸šè´£ä»»é™©ã€å‘˜å·¥ä¿é™©ç­‰ï¼ŒåŠ©åŠ›ä¼ä¸šç¨³å¥å‘å±•ã€‚',
            carInsurance: 'æ±½è½¦ä¿é™©',
            carInsuranceDesc: 'æä¾›å…¨é¢çš„æ±½è½¦ï¼Œæ‘©æ‰˜è½¦ï¼Œæ¸¸è‰‡ç­‰æä¾›å…¨æ–¹ä½ä¿éšœã€‚',
            homeInsurance: 'æˆ¿å±‹ä¿é™©',
            homeInsuranceDesc: 'ä¿æŠ¤æ‚¨çš„è´¢äº§å®‰å…¨ï¼Œä¸ºæ‚¨çš„èµ„äº§æä¾›å…¨æ–¹ä½ä¿éšœã€‚',
            features: {
                business: [
                    'é¤é¥®ä¸šï¼ˆå¤–å–åº—ï¼Œå¥¶èŒ¶åº—ï¼Œè‡ªåŠ©ï¼Œçƒ§çƒ¤ç­‰å„ç±»ï¼‰',
                    'é›¶å”®ä¸šï¼ˆè¶…å¸‚ï¼Œç¾ç”²åº—ï¼Œé¥°å“ç­‰ï¼‰',
                    'æœåŠ¡ä¸šï¼ˆä¼šè®¡ï¼Œæˆ¿äº§ï¼Œå¾‹å¸ˆç­‰ï¼‰',
                    'ç‰©æµä¸šï¼ˆå¡è½¦ï¼Œä»“åº“ç­‰ï¼‰',
                    'å»ºç­‘ä¸šï¼ˆè´­ç‰©ä¸­å¿ƒï¼Œå…¬å¯“ï¼ŒåŠå…¬æ¥¼ï¼Œè£…ä¿®è´£ä»»é™©ï¼Œæ–½å·¥é£é™©é™©ç­‰ï¼‰'
                ],
                car: [
                    'å¿«é€ŸæŠ¥ä»·',
                    'å¤šå®¶ä¿é™©å…¬å¸å¯¹æ¯”',
                    'åœ¨çº¿æŠ•ä¿',
                    'ç†èµ”ååŠ©'
                ],
                home: [
                    'è‡ªä½æˆ¿ï¼Œå‡ºç§Ÿæˆ¿',
                    'å…¨é¢ä¿éšœæ–¹æ¡ˆ',
                    'å¿«é€Ÿç†èµ”æœåŠ¡',
                    '24å°æ—¶ä¸“ä¸šå’¨è¯¢'
                ]
            }
        },
        
        // è”ç³»æ–¹å¼
        contact: {
            title: 'è”ç³»æ–¹å¼',
            subtitle: 'æˆ‘ä»¬éšæ—¶ä¸ºæ‚¨æœåŠ¡',
            address: 'åœ°å€',
            addressValue: 'è¯·å¡«å†™æ‚¨çš„å…¬å¸åœ°å€',
            phone: 'ç”µè¯',
            email: 'é‚®ç®±',
            hours: 'è¥ä¸šæ—¶é—´',
            hoursValue: 'å‘¨ä¸€è‡³å‘¨äº”ï¼š9:00 - 18:00',
            form: {
                name: 'å§“å',
                nameRequired: 'å§“åè‡³å°‘éœ€è¦2ä¸ªå­—ç¬¦',
                email: 'é‚®ç®±',
                emailRequired: 'è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€',
                phone: 'ç”µè¯',
                phoneInvalid: 'è¯·è¾“å…¥æœ‰æ•ˆçš„ç”µè¯å·ç ',
                service: 'å’¨è¯¢ç±»å‹',
                servicePlaceholder: 'è¯·é€‰æ‹©',
                serviceCar: 'æ±½è½¦ä¿é™©',
                serviceProperty: 'æˆ¿å±‹ä¿é™©',
                serviceBusiness: 'å•†ä¸šä¿é™©',
                serviceOther: 'å…¶ä»–',
                message: 'ç•™è¨€',
                messageRequired: 'ç•™è¨€è‡³å°‘éœ€è¦10ä¸ªå­—ç¬¦',
                submit: 'æäº¤å’¨è¯¢',
                success: 'âœ“ æ„Ÿè°¢æ‚¨çš„å’¨è¯¢ï¼æˆ‘ä»¬ä¼šå°½å¿«ä¸æ‚¨è”ç³»ã€‚',
                error: 'âœ— æäº¤å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥åé‡è¯•ã€‚å¦‚æœé—®é¢˜æŒç»­ï¼Œè¯·ç›´æ¥è‡´ç”µè”ç³»æˆ‘ä»¬ã€‚',
                submitting: 'æäº¤ä¸­...',
                cooldown: 'è¯·ç¨å€™å†è¯•ï¼Œè·ç¦»ä¸Šæ¬¡æäº¤è¿˜éœ€ç­‰å¾… {seconds} ç§’'
            }
        },
        
        // é¡µè„š
        footer: {
            tagline: 'ä¸“ä¸šçš„ä¿é™©ä»£ç†æœåŠ¡ï¼Œä¸ºæ‚¨çš„æœªæ¥ä¿é©¾æŠ¤èˆªã€‚',
            quickLinks: 'å¿«é€Ÿé“¾æ¥',
            services: 'æœåŠ¡é¡¹ç›®',
            copyright: 'Â© 2025 Integrity Risk Solutions LLC. ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚'
        }
    },
    
    en: {
        // é¡µé¢æ ‡é¢˜
        pageTitle: 'Integrity Risk Solutions LLC | Professional Insurance Agency',
        
        // å¯¼èˆªæ 
        nav: {
            home: 'Home',
            about: 'About Us',
            services: 'Services',
            contact: 'Contact'
        },
        
        // Heroéƒ¨åˆ†
        hero: {
            title: 'Professional Insurance Agency Services',
            subtitle: 'Comprehensive insurance solutions for you, your family, and your business',
            btnServices: 'Our Services',
            btnContact: 'Contact Us'
        },
        
        // å…³äºæˆ‘ä»¬
        about: {
            title: 'About Us',
            subtitle: 'Your Trusted Insurance Partner',
            heading: 'About Us',
            intro: 'We are a professional insurance agency dedicated to providing the most professional and reliable insurance services to our clients. With years of industry experience and a professional team, we specialize in commercial insurance, auto insurance, and home insurance, helping clients find the most suitable insurance solutions.',
            servicesTitle: 'Our Services',
            businessInsurance: 'Commercial Insurance',
            businessInsuranceDesc: 'We provide comprehensive commercial insurance solutions for various businesses, covering industries such as food service, retail, professional services, logistics, and construction. We understand the unique risk characteristics of different industries and tailor the most suitable coverage plans for businesses.',
            carInsurance: 'Auto Insurance',
            carInsuranceDesc: 'We provide comprehensive coverage for automobiles, motorcycles, boats, and other vehicles. Through quick quotes, multi-insurer comparisons, and professional claims assistance, we ensure you get the most comprehensive coverage at the best price.',
            homeInsurance: 'Home Insurance',
            homeInsuranceDesc: 'We provide professional property protection plans for owner-occupied and rental properties, including property assessment, coverage plan design, fast claims processing, and 24/7 professional consultation.',
            ownerOccupied: 'Homeowner',
            rental: 'Rental',
            whyTitle: 'Why Choose Us',
            whyDesc: 'We adhere to the service principles of professionalism, integrity, and efficiency. By deeply understanding customer needs, we provide personalized insurance solutions. Whether you are an individual or business client, we can provide professional and attentive service, becoming your most trusted insurance partner.',
            yearsExp: 'Years of Experience',
            clients: 'Satisfied Clients',
            partners: 'Insurance Partners'
        },
        
        // æœåŠ¡ä»‹ç»
        services: {
            title: 'Our Services',
            subtitle: 'Comprehensive Insurance Solutions',
            businessInsurance: 'Commercial Insurance',
            businessInsuranceDesc: 'Comprehensive insurance solutions for businesses, including commercial liability insurance, employee insurance, and more, helping businesses grow steadily.',
            carInsurance: 'Auto Insurance',
            carInsuranceDesc: 'Comprehensive coverage for automobiles, motorcycles, boats, and more.',
            homeInsurance: 'Home Insurance',
            homeInsuranceDesc: 'Protect your property assets with comprehensive coverage solutions.',
            features: {
                business: [
                    'Food Service (To-go, bubble tea, buffet, BBQ, etc.)',
                    'Retail (supermarkets, nail salons, accessories, etc.)',
                    'Professional Services (accounting, real estate, legal, etc.)',
                    'Logistics (trucks, warehouses, etc.)',
                    'Construction (shopping centers, apartments, office buildings, renovation liability, construction risk, etc.)'
                ],
                car: [
                    'Quick Quotes',
                    'Multi-Insurer Comparison',
                    'Online Enrollment',
                    'Claims Assistance'
                ],
                home: [
                    'Homeowner & Rental Properties',
                    'Comprehensive Coverage Plans',
                    'Fast Claims Service',
                    '24/7 Professional Consultation'
                ]
            }
        },
        
        // è”ç³»æ–¹å¼
        contact: {
            title: 'Contact Us',
            subtitle: 'We Are Here to Serve You',
            address: 'Address',
            addressValue: 'Please enter your company address',
            phone: 'Phone',
            email: 'Email',
            hours: 'Business Hours',
            hoursValue: 'Monday - Friday: 9:00 AM - 6:00 PM',
            form: {
                name: 'Name',
                nameRequired: 'Name must be at least 2 characters',
                email: 'Email',
                emailRequired: 'Please enter a valid email address',
                phone: 'Phone',
                phoneInvalid: 'Please enter a valid phone number',
                service: 'Service Type',
                servicePlaceholder: 'Please select',
                serviceCar: 'Auto Insurance',
                serviceProperty: 'Home Insurance',
                serviceBusiness: 'Commercial Insurance',
                serviceOther: 'Other',
                message: 'Message',
                messageRequired: 'Message must be at least 10 characters',
                submit: 'Submit Inquiry',
                success: 'âœ“ Thank you for your inquiry! We will contact you soon.',
                error: 'âœ— Submission failed. Please check your network connection and try again. If the problem persists, please call us directly.',
                submitting: 'Submitting...',
                cooldown: 'Please wait. You can submit again in {seconds} seconds'
            }
        },
        
        // é¡µè„š
        footer: {
            tagline: 'Professional insurance agency services, protecting your future.',
            quickLinks: 'Quick Links',
            services: 'Services',
            copyright: 'Â© 2025 Integrity Risk Solutions LLC. All rights reserved.'
        }
    }
};

// å½“å‰è¯­è¨€
let currentLang = localStorage.getItem('preferredLanguage') || 'zh';

// åˆ‡æ¢è¯­è¨€
function switchLanguage(lang) {
    currentLang = lang;
    localStorage.setItem('preferredLanguage', lang);
    updatePageLanguage();
    updateLanguageButtons();
}

// æ›´æ–°é¡µé¢è¯­è¨€
function updatePageLanguage() {
    const t = translations[currentLang];
    
    // æ›´æ–°é¡µé¢æ ‡é¢˜
    document.getElementById('pageTitle').textContent = t.pageTitle;
    document.documentElement.lang = currentLang === 'zh' ? 'zh-CN' : 'en';
    
    // æ›´æ–°æ‰€æœ‰å¸¦æœ‰data-i18nå±æ€§çš„å…ƒç´ 
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        const keys = key.split('.');
        let value = t;
        for (const k of keys) {
            value = value[k];
        }
        if (value !== undefined) {
            if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                if (element.type === 'submit' || element.type === 'button') {
                    element.value = value;
                } else if (element.hasAttribute('placeholder')) {
                    element.placeholder = value;
                }
            } else if (element.tagName === 'OPTION') {
                element.textContent = value;
            } else {
                element.textContent = value;
            }
        }
    });
    
    // æ›´æ–°å…¬å¸åç§°
    const companyName = currentLang === 'zh' ? 'è¯šä¿¡ä¿é™©ä»£ç†å…¬å¸' : 'Integrity Risk Solutions LLC';
    const companyNameElement = document.querySelector('.nav-brand h2');
    if (companyNameElement) {
        companyNameElement.textContent = companyName;
    }
    
    // æ›´æ–°Heroéƒ¨åˆ†
    const heroTitle = document.querySelector('.hero-title');
    const heroSubtitle = document.querySelector('.hero-subtitle');
    if (heroTitle) heroTitle.textContent = t.hero.title;
    if (heroSubtitle) heroSubtitle.textContent = t.hero.subtitle;
    
    const btnServices = document.querySelector('.hero-buttons .btn-primary');
    const btnContact = document.querySelector('.hero-buttons .btn-secondary');
    if (btnServices) btnServices.textContent = t.hero.btnServices;
    if (btnContact) btnContact.textContent = t.hero.btnContact;
    
    // æ›´æ–°å…³äºæˆ‘ä»¬éƒ¨åˆ†
    updateAboutSection(t);
    
    // æ›´æ–°æœåŠ¡ä»‹ç»éƒ¨åˆ†
    updateServicesSection(t);
    
    // æ›´æ–°è”ç³»æ–¹å¼éƒ¨åˆ†
    updateContactSection(t);
    
    // æ›´æ–°é¡µè„š
    updateFooter(t);
}

// æ›´æ–°å…³äºæˆ‘ä»¬éƒ¨åˆ†
function updateAboutSection(t) {
    const sectionTitle = document.querySelector('#about .section-title');
    const sectionSubtitle = document.querySelector('#about .section-subtitle');
    if (sectionTitle) sectionTitle.textContent = t.about.title;
    if (sectionSubtitle) sectionSubtitle.textContent = t.about.subtitle;
    
    const aboutHeading = document.querySelector('#about .about-text h3:first-child');
    if (aboutHeading) aboutHeading.textContent = t.about.heading;
    
    const aboutTexts = document.querySelectorAll('#about .about-text p');
    if (aboutTexts.length >= 1) {
        aboutTexts[0].textContent = t.about.intro;
    }
    
    // æ›´æ–°"æˆ‘ä»¬çš„æœåŠ¡èŒƒå›´"æ ‡é¢˜ - æŸ¥æ‰¾æ‰€æœ‰h3ï¼Œæ‰¾åˆ°åŒ…å«"æœåŠ¡èŒƒå›´"çš„é‚£ä¸ª
    const allH3 = document.querySelectorAll('#about .about-text h3');
    allH3.forEach(h3 => {
        if (h3.textContent.includes('æœåŠ¡èŒƒå›´') || h3.textContent.includes('Services')) {
            h3.textContent = t.about.servicesTitle;
        }
    });
    
    // æ›´æ–°æœåŠ¡èŒƒå›´æè¿°
    const serviceDescriptions = document.querySelectorAll('#about .about-text p strong');
    if (serviceDescriptions.length >= 3) {
        serviceDescriptions[0].textContent = t.about.businessInsurance + ' - ';
        serviceDescriptions[1].textContent = t.about.carInsurance + ' - ';
        serviceDescriptions[2].textContent = t.about.homeInsurance + ' - ';
    }
    
    const serviceParas = document.querySelectorAll('#about .about-text p');
    if (serviceParas.length >= 4) {
        serviceParas[1].innerHTML = '<strong>' + t.about.businessInsurance + ' - </strong>' + t.about.businessInsuranceDesc;
        serviceParas[2].innerHTML = '<strong>' + t.about.carInsurance + ' - </strong>' + t.about.carInsuranceDesc;
        serviceParas[3].innerHTML = '<strong>' + t.about.homeInsurance + ' - </strong>' + t.about.homeInsuranceDesc;
    }
    
    // æ›´æ–°"ä¸ºä»€ä¹ˆé€‰æ‹©æˆ‘ä»¬"æ ‡é¢˜ - ä½¿ç”¨ä¹‹å‰è·å–çš„allH3
    allH3.forEach(h3 => {
        if (h3.textContent.includes('ä¸ºä»€ä¹ˆ') || h3.textContent.includes('Why')) {
            h3.textContent = t.about.whyTitle;
        }
    });
    
    const whyDesc = document.querySelector('#about .about-text p:last-child');
    if (whyDesc && !whyDesc.querySelector('strong')) {
        whyDesc.textContent = t.about.whyDesc;
    }
    
    // æ›´æ–°ç»Ÿè®¡æ•°æ®æ ‡ç­¾
    const statLabels = document.querySelectorAll('.stat-label');
    if (statLabels.length >= 3) {
        statLabels[0].textContent = t.about.yearsExp;
        statLabels[1].textContent = t.about.clients;
        statLabels[2].textContent = t.about.partners;
    }
}

// æ›´æ–°æœåŠ¡ä»‹ç»éƒ¨åˆ†
function updateServicesSection(t) {
    try {
        const sectionTitle = document.querySelector('#services .section-title');
        const sectionSubtitle = document.querySelector('#services .section-subtitle');
        if (sectionTitle) sectionTitle.textContent = t.services.title;
        if (sectionSubtitle) sectionSubtitle.textContent = t.services.subtitle;
        
        // æ›´æ–°å•†ä¸šä¿é™©
        const businessCard = document.querySelector('.service-card-featured');
        if (businessCard) {
            const businessTitle = businessCard.querySelector('h3');
            // ä¿®å¤ï¼šä½¿ç”¨æ­£ç¡®çš„é€‰æ‹©å™¨ï¼Œæ‰¾åˆ°ç›´æ¥å­å…ƒç´ pï¼ˆåœ¨service-card-headerä¹‹åï¼‰
            let businessDesc = businessCard.querySelector('.service-card-header + p');
            if (!businessDesc) {
                // å¦‚æœæ‰¾ä¸åˆ°ï¼Œå°è¯•æŸ¥æ‰¾æ‰€æœ‰på…ƒç´ ï¼Œæ‰¾åˆ°ä¸æ˜¯service-featuresçˆ¶å…ƒç´ çš„p
                const allP = businessCard.querySelectorAll('p');
                businessDesc = Array.from(allP).find(p => {
                    return p.parentElement === businessCard && 
                           !p.classList.contains('service-features') &&
                           !p.querySelector('.service-features');
                });
            }
            const businessFeatures = businessCard.querySelectorAll('.service-features li');
            if (businessTitle) businessTitle.textContent = t.services.businessInsurance;
            if (businessDesc) businessDesc.textContent = t.services.businessInsuranceDesc;
            businessFeatures.forEach((li, index) => {
                if (t.services.features.business[index]) {
                    li.textContent = t.services.features.business[index];
                }
            });
        }
        
        // æ›´æ–°æ±½è½¦ä¿é™©å’Œæˆ¿å±‹ä¿é™©
        const cards = document.querySelectorAll('.services-row .service-card');
        if (cards.length >= 1) {
            // æ±½è½¦ä¿é™©ï¼ˆç¬¬ä¸€ä¸ªå¡ç‰‡ï¼‰
            const carTitle = cards[0].querySelector('h3');
            let carDesc = cards[0].querySelector('.service-card-header + p');
            if (!carDesc) {
                const allP = cards[0].querySelectorAll('p');
                carDesc = Array.from(allP).find(p => {
                    return p.parentElement === cards[0] && 
                           !p.classList.contains('service-features') &&
                           !p.querySelector('.service-features');
                });
            }
            const carFeatures = cards[0].querySelectorAll('.service-features li');
            if (carTitle) carTitle.textContent = t.services.carInsurance;
            if (carDesc) carDesc.textContent = t.services.carInsuranceDesc;
            carFeatures.forEach((li, index) => {
                if (t.services.features.car[index]) {
                    li.textContent = t.services.features.car[index];
                }
            });
        }
        
        if (cards.length >= 2) {
            // æˆ¿å±‹ä¿é™©ï¼ˆç¬¬äºŒä¸ªå¡ç‰‡ï¼‰
            const homeTitle = cards[1].querySelector('h3');
            let homeDesc = cards[1].querySelector('.service-card-header + p');
            if (!homeDesc) {
                const allP = cards[1].querySelectorAll('p');
                homeDesc = Array.from(allP).find(p => {
                    return p.parentElement === cards[1] && 
                           !p.classList.contains('service-features') &&
                           !p.querySelector('.service-features');
                });
            }
            const homeFeatures = cards[1].querySelectorAll('.service-features li');
            if (homeTitle) homeTitle.textContent = t.services.homeInsurance;
            if (homeDesc) homeDesc.textContent = t.services.homeInsuranceDesc;
            homeFeatures.forEach((li, index) => {
                if (t.services.features.home[index]) {
                    li.textContent = t.services.features.home[index];
                }
            });
        }
    } catch (error) {
        console.error('æ›´æ–°æœåŠ¡ä»‹ç»éƒ¨åˆ†æ—¶å‡ºé”™:', error);
    }
}

// æ›´æ–°è”ç³»æ–¹å¼éƒ¨åˆ†
function updateContactSection(t) {
    const sectionTitle = document.querySelector('#contact .section-title');
    const sectionSubtitle = document.querySelector('#contact .section-subtitle');
    if (sectionTitle) sectionTitle.textContent = t.contact.title;
    if (sectionSubtitle) sectionSubtitle.textContent = t.contact.subtitle;
    
    // æ›´æ–°è”ç³»ä¿¡æ¯
    const contactItems = document.querySelectorAll('.contact-item');
    contactItems.forEach((item) => {
        const icon = item.querySelector('.contact-icon');
        const h3 = item.querySelector('.contact-details h3');
        const p = item.querySelector('.contact-details p');
        
        if (icon && h3) {
            const iconText = icon.textContent.trim();
            if (iconText === 'ğŸ“') {
                h3.textContent = t.contact.address;
                if (p && (p.textContent.includes('è¯·å¡«å†™') || p.textContent.includes('Please'))) {
                    p.textContent = t.contact.addressValue;
                }
            } else if (iconText === 'ğŸ“') {
                h3.textContent = t.contact.phone;
            } else if (iconText === 'ğŸ“§') {
                h3.textContent = t.contact.email;
            } else if (iconText === 'ğŸ•’') {
                h3.textContent = t.contact.hours;
                if (p && (p.textContent.includes('å‘¨ä¸€') || p.textContent.includes('Monday'))) {
                    p.textContent = t.contact.hoursValue;
                }
            }
        }
    });
    
    // æ›´æ–°è¡¨å•
    const formLabels = document.querySelectorAll('.form-group label');
    formLabels.forEach(label => {
        const forAttr = label.getAttribute('for');
        if (forAttr === 'name') label.textContent = t.contact.form.name + ' *';
        else if (forAttr === 'email') label.textContent = t.contact.form.email + ' *';
        else if (forAttr === 'phone') label.textContent = t.contact.form.phone;
        else if (forAttr === 'service') label.textContent = t.contact.form.service;
        else if (forAttr === 'message') label.textContent = t.contact.form.message + ' *';
    });
    
    // æ›´æ–°è¡¨å•é€‰é¡¹
    const serviceSelect = document.getElementById('service');
    if (serviceSelect) {
        const options = serviceSelect.querySelectorAll('option');
        if (options.length >= 4) {
            options[1].textContent = t.contact.form.serviceCar;
            options[2].textContent = t.contact.form.serviceProperty;
            options[3].textContent = t.contact.form.serviceBusiness;
            options[4].textContent = t.contact.form.serviceOther;
        }
    }
    
    // æ›´æ–°æäº¤æŒ‰é’®
    const submitBtn = document.querySelector('#contactForm button[type="submit"]');
    if (submitBtn) submitBtn.textContent = t.contact.form.submit;
}

// æ›´æ–°é¡µè„š
function updateFooter(t) {
    const footerTagline = document.querySelector('.footer-section p');
    if (footerTagline) footerTagline.textContent = t.footer.tagline;
    
    const quickLinks = document.querySelector('.footer-section h4');
    if (quickLinks && quickLinks.nextElementSibling) {
        const nextH4 = quickLinks.nextElementSibling;
        if (nextH4.tagName === 'H4') {
            nextH4.textContent = t.footer.services;
        }
    }
    
    const copyright = document.querySelector('.footer-bottom p');
    if (copyright) copyright.textContent = t.footer.copyright;
}

// æ›´æ–°è¯­è¨€æŒ‰é’®çŠ¶æ€
function updateLanguageButtons() {
    document.querySelectorAll('.lang-btn').forEach(btn => {
        if (btn.getAttribute('data-lang') === currentLang) {
            btn.classList.add('active');
        } else {
            btn.classList.remove('active');
        }
    });
}

// åˆå§‹åŒ–è¯­è¨€
function initLanguage() {
    updatePageLanguage();
    updateLanguageButtons();
    
    // è¯­è¨€åˆ‡æ¢æŒ‰é’®äº‹ä»¶ - ä½¿ç”¨äº‹ä»¶å§”æ‰˜
    const languageSwitcher = document.querySelector('.language-switcher');
    if (languageSwitcher) {
        languageSwitcher.addEventListener('click', (e) => {
            const btn = e.target.closest('.lang-btn');
            if (btn) {
                e.preventDefault();
                e.stopPropagation();
                const lang = btn.getAttribute('data-lang');
                if (lang && lang !== currentLang) {
                    switchLanguage(lang);
                }
            }
        });
    }
}

// DOMContentLoadedæ—¶åˆå§‹åŒ–
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initLanguage);
} else {
    // DOMå·²ç»åŠ è½½å®Œæˆï¼Œç«‹å³æ‰§è¡Œ
    initLanguage();
}

